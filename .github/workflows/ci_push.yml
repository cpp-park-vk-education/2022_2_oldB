name: ci push

on:
  push:
    branches: [ "*" ]

jobs:
  format:
    runs-on: ubuntu-latest
    steps:
      - name: checkout
        uses: actions/checkout@v3 
      - name: install
        run: sudo api install clang cmake
      - name: format
        run: clang-format --dry-run --Werror *.cpp

  tidy:
    runs-on: ubuntu-latest
    steps:
      - name: checkout
        uses: actions/checkout@v2 
      - name: cmake
        run: cmake -B${{github.workspace}}/build -DCMAKE_EXPORT_COMPILE_COMMANDS=ON
      - name: tidy
        run: clang-tidy -p build *.cpp
